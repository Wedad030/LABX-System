<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© - LABX</title>
    <link rel="stylesheet" href="style.css">
</head>

<body class="bg">
<div class="layout">

    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header class="top-header">
        <div class="top-header-right">
            <img src="labx.jpeg" class="logo-img" alt="LABX Dental">
            <div class="brand-text">
                <div class="brand-title">LABX DENTAL</div>
                <div class="brand-sub">Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</div>
            </div>
        </div>

        <div class="top-header-left">
            <div class="user-info">
                <span class="hello">ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ </span>
                <span id="username" class="user-name"></span>
            </div>
        </div>
    </header>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    <main class="main-card fade-in">

        <h2>Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªØ³Ù„ÙŠÙ…</h2>

        <div id="readyCasesContainer" class="tiles-grid"></div>

        <h2 style="margin-top:25px;">ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª</h2>

        <!-- RDC1 -->
        <h3>RDC1</h3>
        <div class="tiles-grid" id="rdc1">
            <button class="tile" onclick="moveToBox('RDC1 - BOX 1')">BOX 1</button>
            <button class="tile" onclick="moveToBox('RDC1 - BOX 2')">BOX 2</button>
            <button class="tile" onclick="moveToBox('RDC1 - BOX 3')">BOX 3</button>
            <button class="tile" onclick="moveToBox('RDC1 - BOX 4')">BOX 4</button>
        </div>

        <!-- RDC2 -->
        <h3 style="margin-top:20px;">RDC2</h3>
        <div class="tiles-grid" id="rdc2">
            <button class="tile" onclick="moveToBox('RDC2 - BOX 1')">BOX 1</button>
            <button class="tile" onclick="moveToBox('RDC2 - BOX 2')">BOX 2</button>
            <button class="tile" onclick="moveToBox('RDC2 - BOX 3')">BOX 3</button>
        </div>

        <!-- ØªØ®ØµØµØ§Øª -->
        <h3 style="margin-top:20px;">Ø§Ù„ØªØ®ØµØµØ§Øª</h3>
        <div class="tiles-grid" id="specialty">
            <button class="tile" onclick="moveToBox('Ø§Ù„Ù…Ø¤Ù‚Øª')">Ø§Ù„Ù…Ø¤Ù‚Øª</button>
            <button class="tile" onclick="moveToBox('Ø§Ù„Ù…ØªØ­Ø±Ùƒ')">Ø§Ù„Ù…ØªØ­Ø±Ùƒ</button>
            <button class="tile" onclick="moveToBox('PFM')">PFM</button>
            <button class="tile" onclick="moveToBox('CAD/CAM')">CAD/CAM</button>
        </div>

    </main>
</div>

<script>
document.getElementById("username").innerText =
    localStorage.getItem("labxUser") || "User";

let cases = JSON.parse(localStorage.getItem("labxNewCases")) || [];

// Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© ÙÙ‚Ø·
function showReadyCases() {
    const container = document.getElementById("readyCasesContainer");
    container.innerHTML = "";

    const readyCases = cases.filter(c => c.status === "Ø¬Ø§Ù‡Ø²Ø©");

    readyCases.forEach(c => {
        const div = document.createElement("div");
        div.className = "tile";
        div.innerHTML = `
            <h3>${c.patientName}</h3>
            <p>Ø±Ù‚Ù… Ø§Ù„Ù…Ù„Ù: ${c.fileNumber}</p>
            <p>Ø§Ù„ÙÙ†ÙŠ: ${c.technicianName}</p>
            <p style="font-size:12px;color:#555">Ø¬Ø§Ù‡Ø²Ø© Ù…Ù†Ø°: ${c.readyTime}</p>
            <button class="btn-logout" style="margin-top:10px;background:#163a43;"
                onclick="selectCase('${c.fileNumber}')">Ø§Ø®ØªÙŠØ§Ø±</button>
        `;
        container.appendChild(div);
    });
}

let selectedCase = null;

function selectCase(file) {
    selectedCase = file;
    alert("âœ” ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„Ø© â€” Ø§Ù„Ø¢Ù† Ø­Ø¯Ø¯ÙŠ Ø§Ù„Ø¨ÙˆÙƒØ³ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©.");
}

// Ù†Ù‚Ù„ Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø¨ÙˆÙƒØ³ Ù…Ø¹ÙŠÙ‘Ù†
function moveToBox(boxName) {
    if (!selectedCase) {
        alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø­Ø§Ù„Ø© Ø£ÙˆÙ„Ø§Ù‹.");
        return;
    }

    const index = cases.findIndex(c => c.fileNumber === selectedCase);

    cases[index].assignedBox = boxName;
    cases[index].status = "ØªÙ… ØªÙˆØ²ÙŠØ¹Ù‡Ø§";
    cases[index].distributedTime = new Date().toLocaleString();

    localStorage.setItem("labxNewCases", JSON.stringify(cases));

    alert("âœ… ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰: " + boxName);
    selectedCase = null;
    showReadyCases();
}

showReadyCases();
</script>

</body>
</html>
