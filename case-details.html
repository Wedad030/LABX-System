<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>تفاصيل الحالة</title>
    <style>
        body { font-family: sans-serif; padding: 30px; }
        .card { padding: 20px; border: 1px solid #ccc; border-radius: 10px; }
    </style>
</head>
<body>

<h2>تفاصيل الحالة</h2>
<div id="caseInfo" class="card">جاري تحميل البيانات...</div>

<script type="module">
import { getAllCases } from "./firebase.js";

// قراءة رقم الحالة من الرابط
const urlParams = new URLSearchParams(window.location.search);
const caseID = urlParams.get("id");

// تحميل البيانات من فايربيس
async function loadCase() {
    const allCases = await getAllCases();
    const found = allCases.find(c => c.caseNumber == caseID);

    if (!found) {
        document.getElementById("caseInfo").innerHTML = "❌ لا توجد حالة بهذا الرقم";
        return;
    }

    document.getElementById("caseInfo").innerHTML = `
        <strong>اسم المريض:</strong> ${found.patientName}<br>
        <strong>رقم الملف:</strong> ${found.fileNumber}<br>
        <strong>الطبيب:</strong> ${found.doctor}<br>
        <strong>المساعد:</strong> ${found.assistant}<br>
        <strong>القسم:</strong> ${found.department}<br>
        <strong>الفني:</strong> ${found.technician}<br>
        <strong>نوع الحالة:</strong> ${found.type}<br>
        <strong>التاريخ:</strong> ${found.date}<br>
        <strong>الوقت:</strong> ${found.time}<br>
        <br><br>
        <a href="index.html">رجوع للصفحة الرئيسية</a>
    `;
}

loadCase();
</script>

</body>
</html>
