<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©</title>
    <link rel="stylesheet" href="style.css">

    <style>
        .card {
            padding: 20px;
            margin: 25px auto;
            background: white;
            border-radius: 14px;
            max-width: 450px;
            box-shadow: 0 4px 14px rgba(0,0,0,0.1);
            animation: fadeIn 0.6s ease-out;
        }
        h2 { margin-bottom: 15px; }
        p { margin: 6px 0; font-size: 16px; }
    </style>
</head>

<body class="bg fade-in">

<div class="card">
    <h2>ğŸ¦· ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©</h2>

    <p><b>Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶:</b> <span id="patientName"></span></p>
    <p><b>Ø±Ù‚Ù… Ø§Ù„Ù…Ù„Ù:</b> <span id="fileNumber"></span></p>
    <p><b>Ø§Ù„Ø·Ø¨ÙŠØ¨:</b> <span id="doctorName"></span></p>
    <p><b>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯:</b> <span id="assistantName"></span></p>
    <p><b>Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©:</b> <span id="clinicNumber"></span></p>
    <p><b>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„Ø©:</b> <span id="caseType"></span></p>
    <p><b>Ø§Ù„ÙÙ†ÙŠ:</b> <span id="technician"></span></p>
    <p><b>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b> <span id="notes"></span></p>
    <p><b>Ø§Ù„Ø­Ø§Ù„Ø©:</b> <span id="status"></span></p>
    <p><b>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„:</b> <span id="createdAt"></span></p>
</div>

<!-- Firebase -->
<script type="module">
    import { getCaseById } from "./firebase.js";

    // Ø§Ø³ØªØ®Ø±Ø§Ø¬ ID Ù…Ù† QR
    const urlParams = new URLSearchParams(window.location.search);
    const caseId = urlParams.get("id");

    if (!caseId) {
        alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ø­Ø§Ù„Ø©!");
    } else {
        loadCaseData(caseId);
    }

    async function loadCaseData(id) {
        const data = await getCaseById(id);

        if (!data) {
            alert("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©");
            return;
        }

        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        document.getElementById("patientName").innerText = data.patientName;
        document.getElementById("fileNumber").innerText = data.fileNumber;
        document.getElementById("doctorName").innerText = data.doctorName;
        document.getElementById("assistantName").innerText = data.assistantName;
        document.getElementById("clinicNumber").innerText = data.clinicNumber;
        document.getElementById("caseType").innerText = data.caseType;
        document.getElementById("technician").innerText = data.technicianName;
        document.getElementById("notes").innerText = data.notes || "â€”";
        document.getElementById("status").innerText = data.status;
        document.getElementById("createdAt").innerText = data.createdAt;
    }
</script>

</body>
</html>
